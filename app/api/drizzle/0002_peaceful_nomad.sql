DROP VIEW "public"."jobsWithLastInteraction";--> statement-breakpoint
ALTER TABLE "interviews" ADD COLUMN "updated_at" timestamp DEFAULT now() NOT NULL;--> statement-breakpoint
ALTER TABLE "interviews" ADD COLUMN "created_at" timestamp DEFAULT now() NOT NULL;--> statement-breakpoint
ALTER TABLE "job_processes" ADD COLUMN "updated_at" timestamp DEFAULT now() NOT NULL;--> statement-breakpoint
ALTER TABLE "job_processes" ADD COLUMN "created_at" timestamp DEFAULT now() NOT NULL;--> statement-breakpoint
ALTER TABLE "users" ADD COLUMN "updated_at" timestamp DEFAULT now() NOT NULL;--> statement-breakpoint
CREATE VIEW "public"."jobsWithLastInteraction" AS (select "job_processes"."id", "job_processes"."user_id", "job_processes"."hiring_company", "job_processes"."recruiting_company", "job_processes"."position", "job_processes"."recruiter_name", "job_processes"."recruitment_channel", "job_processes"."monthly_salary", "job_processes"."vacation_days", "job_processes"."holiday_days", "job_processes"."job_description", "job_processes"."direct_hire", "job_processes"."time_zone", "job_processes"."updated_at", "job_processes"."created_at", max("interviews"."interview_date") as "last_interaction" from "job_processes" left join "interviews" on "job_processes"."id" = "interviews"."job_process_id" group by "job_processes"."id", "job_processes"."user_id", "job_processes"."hiring_company", "job_processes"."recruiting_company", "job_processes"."position", "job_processes"."recruiter_name", "job_processes"."recruitment_channel", "job_processes"."monthly_salary", "job_processes"."vacation_days", "job_processes"."holiday_days", "job_processes"."job_description", "job_processes"."direct_hire", "job_processes"."time_zone", "job_processes"."updated_at", "job_processes"."created_at");